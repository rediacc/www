---
import BaseLayout from '../../../layouts/BaseLayout.astro';
import ProblemSolutionSection from '../../../components/ProblemSolutionSection';
import SolutionHero from '../../../components/SolutionHero.astro';
import SolutionCTA from '../../../components/SolutionCTA.astro';
import { createTranslator } from '../../../i18n/utils';
import { SUPPORTED_LANGUAGES } from '../../../i18n/language-utils';
import type { Language } from '../../../i18n/types';
import ctaImage from '../../../assets/images/rediacc_resources_repos.png';
import '../../../styles/solution-page.css';

export async function getStaticPaths() {
  return SUPPORTED_LANGUAGES.map((lang) => ({
    params: { lang },
    props: { lang },
  }));
}

const { lang } = Astro.params as { lang: Language };
const { t, to } = createTranslator(lang);

// Get disaster recovery content
const drContent = to('pages.solutions.disasterRecovery');
---

<BaseLayout
  lang={lang}
  title={t('pages.solutions.disasterRecovery.meta.title')}
  description={t('pages.solutions.disasterRecovery.meta.description')}
  keywords={t('pages.solutions.disasterRecovery.meta.keywords')}
  ogType="website"
>
  <SolutionHero
    title={drContent.hero.title}
    subtitle={drContent.hero.subtitle}
  />

  <!-- Problem-Solution Section 1: Unverified Backups -->
  <ProblemSolutionSection
    client:load
    number={1}
    title={drContent.problems.unverified.title}
    subtitle={drContent.problems.unverified.subtitle}
    problem={{
      description: drContent.problems.unverified.problem.description,
      story: drContent.problems.unverified.problem.story,
      additionalPoints: drContent.problems.unverified.problem.additionalPoints
    }}
    solution={{
      title: drContent.problems.unverified.solution.title,
      description: drContent.problems.unverified.solution.description,
      benefits: drContent.problems.unverified.solution.benefits
    }}
    variant="light"
    cta={{
      text: drContent.cta.button,
      href: `/${lang}/contact?interest=disaster-recovery`
    }}
    pageSlug="disaster-recovery"
  />

  <!-- Problem-Solution Section 2: Limited Backup History -->
  <ProblemSolutionSection
    client:load
    number={2}
    title={drContent.problems.limitedHistory.title}
    subtitle={drContent.problems.limitedHistory.subtitle}
    problem={{
      description: drContent.problems.limitedHistory.problem.description,
      story: drContent.problems.limitedHistory.problem.story,
      additionalPoints: drContent.problems.limitedHistory.problem.additionalPoints
    }}
    solution={{
      title: drContent.problems.limitedHistory.solution.title,
      description: drContent.problems.limitedHistory.solution.description,
      benefits: drContent.problems.limitedHistory.solution.benefits
    }}
    variant="dark"
    cta={{
      text: drContent.cta.button,
      href: `/${lang}/contact?interest=disaster-recovery`
    }}
    pageSlug="disaster-recovery"
  />

  <!-- Problem-Solution Section 3: Time-Consuming Traditional Methods -->
  <ProblemSolutionSection
    client:load
    number={3}
    title={drContent.problems.slowBackups.title}
    subtitle={drContent.problems.slowBackups.subtitle}
    problem={{
      description: drContent.problems.slowBackups.problem.description,
      story: drContent.problems.slowBackups.problem.story,
      additionalPoints: drContent.problems.slowBackups.problem.additionalPoints
    }}
    solution={{
      title: drContent.problems.slowBackups.solution.title,
      description: drContent.problems.slowBackups.solution.description,
      benefits: drContent.problems.slowBackups.solution.benefits
    }}
    variant="light"
    cta={{
      text: drContent.cta.button,
      href: `/${lang}/contact?interest=disaster-recovery`
    }}
    pageSlug="disaster-recovery"
  />

  <SolutionCTA
    title={drContent.cta.title}
    subtitle={drContent.cta.subtitle}
    buttonText={drContent.cta.button}
    buttonHref={`/${lang}/contact?interest=disaster-recovery`}
    imageSrc={ctaImage}
    imageAlt="Rediacc backup resources and repositories"
    lang={lang}
  />
</BaseLayout>
